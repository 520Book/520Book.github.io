import{_ as n,o as s,c as a,e as t}from"./app.678d7e92.js";const p={},e=t(`<h1 id="\u4E00\u3001\u5B89\u88C5\u4F9D\u8D56" tabindex="-1"><a class="header-anchor" href="#\u4E00\u3001\u5B89\u88C5\u4F9D\u8D56" aria-hidden="true">#</a> \u4E00\u3001\u5B89\u88C5\u4F9D\u8D56</h1><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> request-promise
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h1 id="\u4E8C\u3001\u5B9E\u4F8B" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u3001\u5B9E\u4F8B" aria-hidden="true">#</a> \u4E8C\u3001\u5B9E\u4F8B</h1><h2 id="_1-\u53D1\u9001get\u8BF7\u6C42" tabindex="-1"><a class="header-anchor" href="#_1-\u53D1\u9001get\u8BF7\u6C42" aria-hidden="true">#</a> 1. \u53D1\u9001Get\u8BF7\u6C42</h2><p>\u5BF9\u4E8E\u7C7B\u4F3C<code>http://abc.com/xxx.php?token=xxxx&amp;name=xxxx</code>\u7684\u5730\u5740\u53D1\u9001\u8BF7\u6C42\uFF0C<code>token</code>\u548C<code>name</code>\u5C31\u662F<code>qs</code>\u7684\u5B57\u6BB5\u3002\u4E0B\u9762\u6211\u4EE5\u83B7\u53D6\u5C0F\u7A0B\u5E8F\u7684<code>access_token</code>\u4E3A\u4F8B\u8BF4\u660E\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">uri</span><span class="token operator">:</span> <span class="token string">&quot;https://api.weixin.qq.com/cgi-bin/token&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">qs</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">grant_type</span><span class="token operator">:</span> <span class="token string">&quot;client_credential&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">appid</span><span class="token operator">:</span> <span class="token string">&quot;\u4F60\u7684appid&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">secret</span><span class="token operator">:</span> <span class="token string">&quot;\u4F60\u7684secret&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">json</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">rp</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">body</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-\u53D1\u9001post\u8BF7\u6C42" tabindex="-1"><a class="header-anchor" href="#_2-\u53D1\u9001post\u8BF7\u6C42" aria-hidden="true">#</a> 2.\u53D1\u9001Post\u8BF7\u6C42</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> rp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;request-promise&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">uri</span><span class="token operator">:</span>
    <span class="token string">&quot;https://api.weixin.qq.com/tcb/invokecloudfunction?access_token=ACCESS_TOKEN&amp;env=ENV&amp;name=FUNCTION_NAME&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">/* &#39;content-type&#39;: &#39;application/x-www-form-urlencoded&#39; */</span>
    <span class="token comment">// Is set automatically</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">rp</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">body</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,8),o=[e];function c(i,l){return s(),a("div",null,o)}const r=n(p,[["render",c],["__file","request-promise.html.vue"]]);export{r as default};
