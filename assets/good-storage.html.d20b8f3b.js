import{_ as n,r as s,o as r,c as o,a as e,b as a,d as c,e as i}from"./app.678d7e92.js";const d={},l=e("p",null,[a("\u4F7F\u7528"),e("code",null,"LocalStorage"),a("\u5C06\u4E00\u4E9B\u65E0\u5173\u5B89\u5168\u95EE\u9898\u7684\u7528\u6237\u4FE1\u606F\u4FDD\u5B58\u5728\u672C\u5730\uFF0C\u65B9\u4FBF\u4E00\u6B21\u8BF7\u6C42\u4E4B\u540E\u591A\u9875\u9762\u5171\u7528\u6570\u636E\uFF0C\u53EF\u4EE5\u51CF\u5C11\u6D4F\u89C8\u5668\u7684get\u8BF7\u6C42\uFF0C\u63D2\u4EF6"),e("code",null,"good-storage"),a("\u5C31\u662F\u4E00\u4E2A\u4E0D\u9519\u7684\u4EE3\u8868\u3002")],-1),p={href:"https://www.npmjs.com/package/good-storage",target:"_blank",rel:"noopener noreferrer"},u=i(`<h1 id="\u5B89\u88C5\u63D2\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5\u63D2\u4EF6" aria-hidden="true">#</a> \u5B89\u88C5\u63D2\u4EF6</h1><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>npm i good-storage -S
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h1 id="\u7528\u6CD5" tabindex="-1"><a class="header-anchor" href="#\u7528\u6CD5" aria-hidden="true">#</a> \u7528\u6CD5</h1><h2 id="localstorage" tabindex="-1"><a class="header-anchor" href="#localstorage" aria-hidden="true">#</a> localStorage</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>storage<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>

storage<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> def<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="sessionstorage" tabindex="-1"><a class="header-anchor" href="#sessionstorage" aria-hidden="true">#</a> sessionStorage</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>storage<span class="token punctuation">.</span>session<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>

storage<span class="token punctuation">.</span>session<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="api" tabindex="-1"><a class="header-anchor" href="#api" aria-hidden="true">#</a> API</h2><table><thead><tr><th>\u65B9\u6CD5</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td>set(key, val)</td><td>set storage with key and val</td></tr><tr><td>get(key, def)</td><td>get storage with key, return def if not find</td></tr><tr><td>remove(key)</td><td>remove storage with key</td></tr><tr><td>has(key)</td><td>determine storage has the key</td></tr><tr><td>clear()</td><td>clear all storages</td></tr><tr><td>getAll()</td><td>get all the storages</td></tr><tr><td>forEach(callback)</td><td>forEach the storages and call the callback function with each storage</td></tr></tbody></table><h1 id="\u7B80\u5355\u5B9E\u4F8B" tabindex="-1"><a class="header-anchor" href="#\u7B80\u5355\u5B9E\u4F8B" aria-hidden="true">#</a> \u7B80\u5355\u5B9E\u4F8B</h1><p>\u5728\u672C\u5730\u65B0\u5EFA<code>cache.js</code>\u6587\u4EF6\uFF08\u901A\u5E38\u53EF\u4EE5\u653E\u5728<code>utils</code>\u4E4B\u7C7B\u7684\u76EE\u5F55\u4E0B\uFF09,\u8BE5\u6587\u4EF6\u662F\u5173\u4E8E\u672C\u5730\u5B58\u50A8\u7684\u903B\u8F91\u5904\u7406(\u7F13\u5B58\u5230\u672C\u5730\u7684\u6570\u636E\u6700\u5927\u7F13\u5B5815\u6761\uFF0C\u5E76\u4E14\u65B0\u7684\u63D2\u5165\u5728\u7B2C\u4E00\u4F4D\uFF0C\u9996\u5148\u5F97\u5230\u5F53\u524D\u7684\u5B58\u50A8\u6570\u636E\u60C5\u51B5\uFF0C\u5C06\u5173\u952E\u5B57\u5B58\u5230\u6570\u7EC4\u4E2D\uFF0C\u5224\u65AD\u5982\u679C\u6570\u7EC4\u4E2D\u6709\u76F8\u540C\u7684\u6570\u636E\uFF0C\u5219\u628A\u91CD\u590D\u7684\u6570\u636E\u5220\u9664\uFF0C\u5C06\u65B0\u7684\u5173\u952E\u5B57\u5B58\u5165\u5230\u524D\u9762)</p><p>cache.js</p><p>/<em>\u628A\u641C\u7D22\u7684\u7ED3\u679C\u4FDD\u5B58\u4E0B\u6765</em>/<br> /<em>\u7528export\u628A\u65B9\u6CD5\u66B4\u9732\u51FA\u6765</em>/<br> /_\u5B9A\u4E49\u5B58\u50A8\u641C\u7D22\u7684key <em>search_\u5B9A\u4E49\u5185\u90E8\u4F7F\u7528\u7684key</em>/<br> const SEARCH_KEY=&#39;<em>search</em>&#39;<br> const SEARCH_MAX_LENGTH=15<br> /<em>\u63D2\u5165\u65B9\u6CD5 arr\u5B58\u50A8\u7684\u6570\u636E val\u4F20\u5165\u5B58\u50A8\u7684\u503C compare\u524D\u540E\u6BD4\u8F83\u7684\u51FD\u6570 maxlen\u5B58\u5165\u7684\u6700\u5927\u503C</em>/<br> function insertArray(arr,val,compare,maxlen){<br> //findIndex()\u51FD\u6570\u4E5F\u662F\u67E5\u627E\u76EE\u6807\u5143\u7D20\uFF0C\u627E\u5230\u5C31\u8FD4\u56DE\u5143\u7D20\u7684\u4F4D\u7F6E\uFF0C\u627E\u4E0D\u5230\u5C31\u8FD4\u56DE-1\u3002<br> const index=arr.findIndex(compare)<br> if(index===0){ //\u6570\u636E\u4E3A\u6570\u7EC4\u4E2D\u7684\u7B2C\u4E00\u4E2A\u6570\u636E \u4E0D\u505A\u4EFB\u4F55\u64CD\u4F5C<br> return<br> }<br> if(index&gt;0){ //\u6570\u7EC4\u4E2D\u6709\u8FD9\u6761\u6570\u636E\u5E76\u4E14\u4E0D\u518D\u7B2C\u4E00\u4E2A\u4F4D\u7F6E<br> arr.splice(index,1) //\u5220\u6389\u8FD9\u4E2A\u6570<br> }<br> arr.unshift(val);//\u628A\u8FD9\u6761\u6570\u636E\u5B58\u50A8\u5230\u6570\u7EC4\u4E2D\u7684\u7B2C\u4E00\u4E2A\u4F4D\u7F6E\u4E0A<br> if(maxlen &amp;&amp; arr.length&gt;maxlen){<br> //\u5982\u679C\u6709\u6761\u6570\u9650\u5236\u5E76\u4E14\u6570\u7EC4\u7684\u4E2A\u6570\u5927\u4E8E\u9650\u5236\u6570<br> arr.pop() //\u65B9\u6CD5\u5C06\u5220\u9664 arrayObject \u7684\u6700\u540E\u4E00\u4E2A\u5143\u7D20\uFF0C\u628A\u6570\u7EC4\u957F\u5EA6\u51CF 1\uFF0C\u5E76\u4E14\u8FD4\u56DE\u5B83\u5220\u9664\u7684\u5143\u7D20\u7684\u503C</p><pre><code>}
</code></pre><p>}<br> //\u5F00\u6E90storage\u7684\u5E93\uFF0C\u5BF9localstorage\u548Csessionstorage\u7684\u5C01\u88C5<br> import storage from &#39;good-storage&#39;<br> export function saveSearch(query){<br> let searches=storage.get(SEARCH_KEY,[])<br> /<em>\u903B\u8F91\u662F\u6700\u540E\u4E00\u6B21\u641C\u7D22\u7684\u7ED3\u679C\u653E\u5230\u641C\u7D22\u5386\u53F2\u7684\u7B2C\u4E00\u4E2A</em>/<br> insertArray(searches,query,(item)=&gt;{<br> return item===query //\u8FD9\u662F\u4F20\u5165\u7684\u4E00\u4E2A\u6BD4\u8F83\u51FD\u6570 \u8BF4\u660Equery\u5728\u8FD9\u4E2A\u6570\u7EC4\u4E2D<br> },SEARCH_MAX_LENGTH)<br> storage.set(SEARCH_KEY,searches)<br> return searches<br> }</p><p>\u5728\u5BF9\u5E94\u7684\u7EC4\u4EF6\u4E2D\u5E94\u7528\u7684\u65B9\u5F0F:</p><p>\u4F5C\u8005\uFF1A\u6709\u98CE\u5439\u662F\u5E78\u798F\u7684 \u94FE\u63A5\uFF1Ahttps://www.jianshu.com/p/20a577a6de00 \u4F86\u6E90\uFF1A\u7B80\u4E66 \u7B80\u4E66\u8457\u4F5C\u6743\u5F52\u4F5C\u8005\u6240\u6709\uFF0C\u4EFB\u4F55\u5F62\u5F0F\u7684\u8F6C\u8F7D\u90FD\u8BF7\u8054\u7CFB\u4F5C\u8005\u83B7\u5F97\u6388\u6743\u5E76\u6CE8\u660E\u51FA\u5904\u3002</p>`,17);function h(g,b){const t=s("ExternalLinkIcon");return r(),o("div",null,[l,e("p",null,[e("a",p,[a("good-storage \u4E3B\u9875"),c(t)])]),u])}const k=n(d,[["render",h],["__file","good-storage.html.vue"]]);export{k as default};
